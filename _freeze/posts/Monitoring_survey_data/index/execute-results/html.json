{
  "hash": "11de503bd9c0df3e045f224272e4920b",
  "result": {
    "markdown": "---\ntitle: \"Real time monitoring survey data\"\nauthor: \"Victor Mandela\"\ndate: \"2024-01-23\"\ncategories: [Soft Skills, Survey, R]\nimage: \"combine.jpg\"\n---\n\n\n## **Monitoring Data Quality in Real Time**\n\nPreserving the integrity of collected data demands real-time monitoring mechanisms. Employ tools like the R programming language to create scripts that automatically analyze incoming data for inconsistencies or errors.\n\nFirst we install the relevant packages, specifically the \\[testthat package\\](https://testthat.r-lib.org/)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load necessary packages\n# install.packages(c(\"dplyr\", \"lubridate\", \"testthat\"))\nlibrary(dplyr)\nlibrary(lubridate)\nlibrary(testthat)\n```\n:::\n\n\nWe then generate an example agricultural data set for practice that has \"Temperature\" and \"Crop yield\" as some of its variable. We use \"Set seed\" to make sure there is reproducibility of the data again. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Function to generate a sample dataset\ngenerate_sample_dataset <- function() {\n  set.seed(123)\n  n_rows <- 100\n  agricultural_data <- data.frame(\n    temperature = rnorm(n_rows, mean = 25, sd = 5),\n    crop_yield = rpois(n_rows, lambda = 30)\n  )\n  write.csv(agricultural_data, \"agricultural_data.csv\", row.names = FALSE)\n}\n\n# Function to check for outliers and validate data\ncheck_data_quality <- function() {\n  # Load the dataset\n  agricultural_data <- read.csv(\"agricultural_data.csv\")\n\n  # Check for outliers in 'crop_yield' using the IQR method\n  crop_yield_outliers <- boxplot.stats(agricultural_data$crop_yield)$out\n  test_that(\"No outliers in crop_yield\", expect_length(crop_yield_outliers, 0))\n\n  # Validate 'temperature' against predefined criteria\n  invalid_temperature <- agricultural_data %>%\n    filter(temperature < -20 | temperature > 40)\n  test_that(\"Valid temperature values\", expect_equal(nrow(invalid_temperature), 0))\n\n  # Add additional checks for other variables as needed\n\n  # Print timestamp for feedback\n  print(paste(\"Data quality check completed at\", Sys.time()))\n}\n```\n:::\n\n\nsome text here\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Generate a sample dataset\ngenerate_sample_dataset()\n\n# Schedule the script to run every day at a specific time (e.g., 2:00 AM)\nwhile (TRUE) {\n  current_time <- as.numeric(format(Sys.time(), \"%H%M\"))\n\n  # Check if it's time to run the script (e.g., 2:00 AM)\n  if (current_time >= 200 && current_time < 201) {\n    test_file(\"data_quality_checks.R\")  # Run the tests\n    check_data_quality()\n    Sys.sleep(86400)  # Sleep for 24 hours (86400 seconds) before checking again\n  } else {\n    Sys.sleep(60)  # Sleep for 1 minute before checking again\n  }\n}\n```\n:::\n\n\nIn this script, the testthat library is used to create tests within the check_data_quality function. The tests check for the absence of outliers in 'crop_yield' and the validity of 'temperature' values. If any of the tests fail, testthat will throw an error, providing instant feedback on data quality.\n\nThe script then schedules the data quality checks to run every day at a specific time. Adjust the time conditions as needed for your specific schedule. The Sys.sleep function is used to introduce delays between checks.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}